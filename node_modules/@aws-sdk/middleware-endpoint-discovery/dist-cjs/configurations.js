"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NODE_ENDPOINT_DISCOVERY_CONFIG_OPTIONS = void 0;
const ENV_ENDPOINT_DISCOVERY = ["AWS_ENABLE_ENDPOINT_DISCOVERY", "AWS_ENDPOINT_DISCOVERY_ENABLED"];
const CONFIG_ENDPOINT_DISCOVERY = "endpoint_discovery_enabled";
const isFalsy = (value) => ["false", "0"].indexOf(value) >= 0;
exports.NODE_ENDPOINT_DISCOVERY_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => {
        for (let i = 0; i < ENV_ENDPOINT_DISCOVERY.length; i++) {
            const envKey = ENV_ENDPOINT_DISCOVERY[i];
            if (envKey in env) {
                const value = env[envKey];
                if (value === "") {
                    throw Error(`Environment variable ${envKey} can't be empty of undefined, got "${value}"`);
                }
                return !isFalsy(value);
            }
        }
    },
    configFileSelector: (profile) => {
        if (CONFIG_ENDPOINT_DISCOVERY in profile) {
            const value = profile[CONFIG_ENDPOINT_DISCOVERY];
            if (value === undefined) {
                throw Error(`Shared config entry ${CONFIG_ENDPOINT_DISCOVERY} can't be undefined, got "${value}"`);
            }
            return !isFalsy(value);
        }
    },
    default: undefined,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvY29uZmlndXJhdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsTUFBTSxzQkFBc0IsR0FBRyxDQUFDLCtCQUErQixFQUFFLGdDQUFnQyxDQUFDLENBQUM7QUFDbkcsTUFBTSx5QkFBeUIsR0FBRyw0QkFBNEIsQ0FBQztBQUUvRCxNQUFNLE9BQU8sR0FBRyxDQUFDLEtBQWEsRUFBRSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUV6RCxRQUFBLHNDQUFzQyxHQUErQztJQUNoRywyQkFBMkIsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFO1FBQ25DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEQsTUFBTSxNQUFNLEdBQUcsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekMsSUFBSSxNQUFNLElBQUksR0FBRyxFQUFFO2dCQUNqQixNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzFCLElBQUksS0FBSyxLQUFLLEVBQUUsRUFBRTtvQkFDaEIsTUFBTSxLQUFLLENBQUMsd0JBQXdCLE1BQU0sc0NBQXNDLEtBQUssR0FBRyxDQUFDLENBQUM7aUJBQzNGO2dCQUVELE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDeEI7U0FDRjtJQUNILENBQUM7SUFDRCxrQkFBa0IsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFO1FBQzlCLElBQUkseUJBQXlCLElBQUksT0FBTyxFQUFFO1lBQ3hDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQ2pELElBQUksS0FBSyxLQUFLLFNBQVMsRUFBRTtnQkFDdkIsTUFBTSxLQUFLLENBQUMsdUJBQXVCLHlCQUF5Qiw2QkFBNkIsS0FBSyxHQUFHLENBQUMsQ0FBQzthQUNwRztZQUNELE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDeEI7SUFDSCxDQUFDO0lBQ0QsT0FBTyxFQUFFLFNBQVM7Q0FDbkIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvYWRlZENvbmZpZ1NlbGVjdG9ycyB9IGZyb20gXCJAYXdzLXNkay9ub2RlLWNvbmZpZy1wcm92aWRlclwiO1xuXG5jb25zdCBFTlZfRU5EUE9JTlRfRElTQ09WRVJZID0gW1wiQVdTX0VOQUJMRV9FTkRQT0lOVF9ESVNDT1ZFUllcIiwgXCJBV1NfRU5EUE9JTlRfRElTQ09WRVJZX0VOQUJMRURcIl07XG5jb25zdCBDT05GSUdfRU5EUE9JTlRfRElTQ09WRVJZID0gXCJlbmRwb2ludF9kaXNjb3ZlcnlfZW5hYmxlZFwiO1xuXG5jb25zdCBpc0ZhbHN5ID0gKHZhbHVlOiBzdHJpbmcpID0+IFtcImZhbHNlXCIsIFwiMFwiXS5pbmRleE9mKHZhbHVlKSA+PSAwO1xuXG5leHBvcnQgY29uc3QgTk9ERV9FTkRQT0lOVF9ESVNDT1ZFUllfQ09ORklHX09QVElPTlM6IExvYWRlZENvbmZpZ1NlbGVjdG9yczxib29sZWFuIHwgdW5kZWZpbmVkPiA9IHtcbiAgZW52aXJvbm1lbnRWYXJpYWJsZVNlbGVjdG9yOiAoZW52KSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBFTlZfRU5EUE9JTlRfRElTQ09WRVJZLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBlbnZLZXkgPSBFTlZfRU5EUE9JTlRfRElTQ09WRVJZW2ldO1xuICAgICAgaWYgKGVudktleSBpbiBlbnYpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBlbnZbZW52S2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoYEVudmlyb25tZW50IHZhcmlhYmxlICR7ZW52S2V5fSBjYW4ndCBiZSBlbXB0eSBvZiB1bmRlZmluZWQsIGdvdCBcIiR7dmFsdWV9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBAdHMtaWdub3JlIEFyZ3VtZW50IG9mIHR5cGUgJ3N0cmluZyB8IHVuZGVmaW5lZCcgaXMgbm90IGFzc2lnbmFibGUgdG8gcGFyYW1ldGVyIG9mIHR5cGUgJ3N0cmluZydcbiAgICAgICAgcmV0dXJuICFpc0ZhbHN5KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNvbmZpZ0ZpbGVTZWxlY3RvcjogKHByb2ZpbGUpID0+IHtcbiAgICBpZiAoQ09ORklHX0VORFBPSU5UX0RJU0NPVkVSWSBpbiBwcm9maWxlKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHByb2ZpbGVbQ09ORklHX0VORFBPSU5UX0RJU0NPVkVSWV07XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBFcnJvcihgU2hhcmVkIGNvbmZpZyBlbnRyeSAke0NPTkZJR19FTkRQT0lOVF9ESVNDT1ZFUll9IGNhbid0IGJlIHVuZGVmaW5lZCwgZ290IFwiJHt2YWx1ZX1cImApO1xuICAgICAgfVxuICAgICAgcmV0dXJuICFpc0ZhbHN5KHZhbHVlKTtcbiAgICB9XG4gIH0sXG4gIGRlZmF1bHQ6IHVuZGVmaW5lZCxcbn07XG4iXX0=